<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verkkokauppa</title>
    <link rel="stylesheet" href="../css/Etusivu.css">
    <link rel="stylesheet" href="../css/Login.css">
</head>
<body>
<div id="sisalto">
    <header>
        <div class="top">
            <a onclick="showLogin()">Kirjaudu</a>
            <a href="Login.html">Luo tunnus</a>

            <div id="lomake" class="login">
                <form name="login" class="kayttaja">
                    <input type="email" name="sposti" placeholder="Sähköposti.."></input>
                    <input type="password" name="psw" placeholder="Salasana.."></input>
                    <button id="kirjaudu">Kirjaudu</button>

                </form>
                <script language="JavaScript">
                    function showLogin() {

                        var x = document.getElementById('lomake');
                        if (x.style.visibility === 'hidden') {
                            x.style.visibility = 'visible';
                        } else {
                            x.style.visibility = 'hidden';
                        }
                    }
                </script>

            </div>
            <h1>Verkkokauppa</h1>
            <div class="haku">
                <div class="nav">
                    <a href="Etusivu.html">Etusivu</a>
                    <a href="Verkkokauppa.html">Tuotteet</a>
                    <a href="Ostoskori.html">Ostoskori</a>
                </div>
            </div>
        </div>
    </header>
    <div class="keskiosa">
        <h2>Luo käyttäjätunnus</h2>

        <form>
            <div class="infot">
                <label><b>Sähköposti</b></label>
                <input type="text" placeholder="Sähköposti..." name="email" id="email" required>

                <label><b>Salasana</b></label>
                <input type="password" placeholder="Salasana..." name="ss" id="password" required>


                <input type="checkbox" checked="checked"> Muista minut
                <div class="napit">
                    <button type="submit" class="signup" onclick="addUser()">Luo tili</button>
                    <p id="status"></p>
                </div>
            </div>
        </form>
    </div>
</body>

<footer>
    <div class="uutiskirje">
        <form>
            Tilaa uutiskirjeemme
            <input type="email" name="newsletter" placeholder="Sähköposti...">
            <button id="send">Lähetä</button>
        </form>
    </div>
</footer>

<script>
    function addUser() {

        var xmlreq = new XMLHttpRequest();

        var status;

        var email = document.getElementById("email").value;
        var pw = document.getElementById("password").value;

        console.log(email);
        console.log(pw);

        var vars = "email="+email+"&password="+pw;


        xmlreq.open("POST", "../php/addUser.php", true);

        xmlreq.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

        xmlreq.onreadystatechange = callback_handler;

        xmlreq.send(vars);

        function callback_handler() {

            if (xmlreq.readyState === 4 && xmlreq.status === 200) {
                status = xmlreq.responseText;

            }

            if (status === 1) {
                document.getElementById("status").innerHTML = "Käyttäjän luonti onnistui!";

            } else {
                document.getElementById("status").innerHTML = "Käyttäjän luonti epäonnistui!";

            }
        }

    return false;

    }



</script>

</html>